

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Run OCR on HTC &mdash; OCR 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="OCR" href="ocr.html" />
    <link rel="prev" title="Preprocess" href="preprocess.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> OCR
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="split.html">Split PDF file into images</a></li>
<li class="toctree-l1"><a class="reference internal" href="slurm_1.html">Run pre-process on HTC</a></li>
<li class="toctree-l1"><a class="reference internal" href="imageCleaning.html">Image Cleaning</a></li>
<li class="toctree-l1"><a class="reference internal" href="preprocess.html">Preprocess</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Run OCR on HTC</a></li>
<li class="toctree-l1"><a class="reference internal" href="ocr.html">OCR</a></li>
<li class="toctree-l1"><a class="reference internal" href="postprocess.html">Post-process</a></li>
<li class="toctree-l1"><a class="reference internal" href="time.html">Time</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OCR</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Run OCR on HTC</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/slurm_2.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="run-ocr-on-htc">
<h1>Run OCR on HTC<a class="headerlink" href="#run-ocr-on-htc" title="Permalink to this headline">Â¶</a></h1>
<p>The number of job array correspond to the number of processors that we set in the previous slurm file. For example, we set the number of processors as 30 in the previous slurm file, then we should set array as 0-29 or 1-30 to ensure there are 30 processors in total.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/bin/bash
#SBATCH --job-name=ocr
#SBATCH --partition=commons
#SBATCH --ntasks=1
#SBATCH --time=00:30:00
#SBATCH --export=ALL
#SBATCH --mail-user= ##Enter your email
#SBATCH --mail-type=ALL
#SBATCH --array=0-29  ##The number of the processors

module load GCC/7.3.0 OpenMPI/3.1.2
module load Python/3.6.6
pip3 install --user pytesseract

sh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Linuxbrew/install/master/install.sh)&quot;

echo &quot;export PATH=/home/hy31/.linuxbrew/bin/:$PATH&quot; &gt;&gt; ~/.bash_profile &amp;&amp; source ~/.bash_profile

brew install tesseract

python ocr.py -p $SLURM_ARRAY_TASK_ID
</pre></div>
</div>
<p>In Figure 1, vertical axis represents the average time that one page takes to do the OCR process and horizontal axis represents how many pages are processed in total. We can see that when there are fewer pages being processed, the speed of OCR is a little bit faster. When the number of pages is large, the speed of OCR will gradually maintain steady.</p>
<img alt="_images/chart1.jpg" src="_images/chart1.jpg" />
<p>In Figure 2, vertical axis represents the number of pages that can be processed in one second and horizontal axis represents how many processors are used. It is clear to see that as the number of processors increases, more pages can be processed by OCR in one second. This graph shows the largest advantage of HTC: more than one processor means multiple jobs can be done at the same time.</p>
<img alt="_images/chart2.jpg" src="_images/chart2.jpg" />
<p>In Figure 3, vertical axis represents the average time that one page takes to do the OCR process and horizontal axis represents the number of processors used. The shape of flat curve shows that the number of processors does not affect the speed of OCR.</p>
<img alt="_images/chart3.jpg" src="_images/chart3.jpg" />
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ocr.html" class="btn btn-neutral float-right" title="OCR" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="preprocess.html" class="btn btn-neutral float-left" title="Preprocess" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Shengjing Zhang

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>